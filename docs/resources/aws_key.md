---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "ciphertrust_aws_key Resource - terraform-provider-ciphertrust"
subcategory: ""
description: |-
  
---

# ciphertrust_aws_key (Resource)



## Example Usage

```terraform
# Basic create key usage

resource "ciphertrust_aws_key" "aws_key" {
  alias                      = ["key_name"]
  kms                        = ciphertrust_aws_kms.kms.id
  region                     = "us-east-1"
}

# Upload a CipherTrust CM key to AWS

resource "ciphertrust_aws_key" "aws_key" {
  alias  = ["key_name"]
  kms    = ciphertrust_aws_kms.kms.id
  region = "us-east-1"
  upload_key {
    source_key_identifier = ciphertrust_cm_key.cm_key.id
  }
}

# Import key material from a CipherTrust CM key

resource "ciphertrust_aws_key" "aws_key" {
  alias = ["key_name"]
  import_key_material {
    source_key_name = "cm_key_name"
  }
  kms    = ciphertrust_aws_kms.kms.id
  origin = "EXTERNAL"
  region = "us-east-1"
}

# Schedule key rotation using a DSM as the key source

resource "ciphertrust_aws_key" "aws_multiregion_key" {
  alias = ["alias_1", "alias_2"]
  enable_rotation {
    disable_encrypt = true
    dsm_domain_id   = ciphertrust_dsm_domain.dsm_domain.id
    job_config_id   = ciphertrust_scheduler.rotation_job.id
    key_source      = "dsm"
  }
  kms    = ciphertrust_aws_kms.kms.id
  origin = "AWS_KMS"
  region = "us-east-1"
}

# Create an multi-region key and replicates it to another region
# This example makes the replica the primary key following replication

resource "ciphertrust_aws_key" "aws_key" {
  alias        = ["multi-region-key"]
  kms          = ciphertrust_aws_kms.kms.id
  multi_region = true
  region       = "us-east-1"
}

resource "ciphertrust_aws_key" "replicated_key" {
  alias = ["replicated-key"]
  origin                             = "AWS_KMS"
  region                             = "us-north-1"
  replicate_key {
    key_id = ciphertrust_aws_key.aws_multiregion_key.key_id
    make_primary = true
  }
}

# Create an external multi-region key and replicates it to another region

resource "ciphertrust_aws_key" "aws_key" {
  alias = ["alias"]
  import_key_material {
    source_key_name = "cm_key_name"
  }
  kms          = ciphertrust_aws_kms.kms.id
  multi_region = true
  origin       = "EXTERNAL"
  region       = "us-east-1"
}

resource "ciphertrust_aws_key" "replicated_key" {
  alias       = ["alias"]
  region      = "us-north-1"
  replicate_key {
    import_key_material = true
    key_id              = ciphertrust_aws_key.aws_external_multiregion_key.key_id
  }
  origin = "EXTERNAL"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **region** (String) AWS region in which to create or replicate a key.

### Optional

- **alias** (Set of String) Alias(es) of the key. To allow for key rotation changing or removing original aliases, all aliases already assigned to another key will be ignored.
- **auto_rotate** (Boolean) Enable AWS autorotation on the key. Default is false.
- **bypass_policy_lockout_safety_check** (Boolean) Bypass the AWS key policy lockout safety check. Default is false.
- **customer_master_key_spec** (String) Specifies a symmetric key or an asymmetric key pair and the encryption algorithms or signing algorithms the key supports. Valid values: SYMMETRIC_DEFAULT, RSA_2048, RSA_3072, RSA_4096, ECC_NIST_P256, ECC_NIST_P384, ECC_NIST_P521 and ECC_SECG_P256K1. Default is SYMMETRIC_DEFAULT.
- **description** (String) Description of the AWS key.
- **enable_key** (Boolean) Enable or disable the key. Default is true.
- **enable_rotation** (Block List, Max: 1) Enable the key for scheduled rotation job. (see [below for nested schema](#nestedblock--enable_rotation))
- **id** (String) The ID of this resource.
- **import_key_material** (Block List, Max: 1) Key import details. (see [below for nested schema](#nestedblock--import_key_material))
- **key_policy** (Block List, Max: 1) Key policy to attach to the AWS key. Policy and key administrators, key_users, and AWS accounts are mutually exclusive. Specify either the policy or any one user at a time. If no parameters are specified, the default policy is used. (see [below for nested schema](#nestedblock--key_policy))
- **key_usage** (String) Specifies the intended use of the key. RSA key options: ENCRYPT_DECRYPT, SIGN_VERIFY. Default is ENCRYPT_DECRYPT. EC key options: SIGN_VERIFY. Default is SIGN_VERIFY. Symmetric key options: ENCRYPT_DECRYPT. Default is ENCRYPT_DECRYPT.
- **kms** (String) Name or ID of the kms. Required unless replicating a multi-user key.
- **multi_region** (Boolean) Creates or identifies a multi-region key.
- **origin** (String) Source of the CMK's key material.  Options: AWS_KMS, EXTERNAL.AWS_KMS will create a native AWS key. EXTERNAL will create an external AWS key with no key material.
- **primary_region** (String) Update primary region of a multi-region key. Can only be set for the primary key.
- **replicate_key** (Block List, Max: 1) Key replication details. (see [below for nested schema](#nestedblock--replicate_key))
- **schedule_for_deletion_days** (Number) Waiting period after the key is destroyed before the key is deleted. Default is 7.
- **tags** (Map of String) A list of key:value pairs to assign to the key.
- **upload_key** (Block List, Max: 1) Key upload details. (see [below for nested schema](#nestedblock--upload_key))

### Read-Only

- **arn** (String) The Amazon Resource Name (ARN) of the key.
- **aws_account_id** (String) AWS account ID.
- **aws_key_id** (String) AWS key id.
- **basic_view_enabled** (Boolean) What does this mean!
- **cloud_name** (String) AWS cloud.
- **created_at** (String) Date the key was created.
- **deletion_date** (String) Date the key is scheduled for deletion.
- **enabled** (Boolean) True if the key is enabled.
- **encryption_algorithms** (List of String) Encryption algorithms of an asymmetric key
- **expiration_model** (String) Expiration model.
- **external_accounts** (List of String) Other AWS accounts that have access to this key.
- **gone** (Boolean) True if the key is not managed by the connection.
- **key_admins** (List of String) Key administrators.
- **key_id** (String) CipherTrust Key ID.
- **key_manager** (String) Key manager.
- **key_material_origin** (String) Key material origin.
- **key_rotation_enabled** (Boolean) True if rotation is enabled in AWS for this key.
- **key_source** (String) Source of the key.
- **key_state** (String) Key state.
- **key_type** (String) Key type.
- **key_users** (List of String) Key users.
- **labels** (Map of String) A list of key:value pairs associated with the key.
- **local_key_id** (String) CipherTrust key identifier of the external key.
- **local_key_name** (String) CipherTrust key name of the external key.
- **multi_region_key_type** (String) Indicates if the key is the primary key or a replica key.
- **multi_region_primary_key** (Map of String) Multi-region primary key details.
- **multi_region_replica_keys** (List of Map of String) Multi-region primary key details.
- **policy** (String) AWS key policy.
- **replica_policy** (String) Replication policy.
- **replica_tags** (Map of String) A list of key:value pairs to assigned to the key.
- **rotated_at** (String) Time when this key was rotated by a scheduled rotation job.
- **rotated_from** (String) CipherTrust Manager key ID from of the key this key has been rotated from by a scheduled rotation job.
- **rotated_to** (String) CipherTrust Manager key ID which this key has been rotated too by a scheduled rotation job.
- **rotation_status** (String) Rotation status of the key.
- **synced_at** (String) Date the key was synchronized.
- **updated_at** (String) Date the key was last updated.
- **valid_to** (String) Date of key material expiry.

<a id="nestedblock--enable_rotation"></a>
### Nested Schema for `enable_rotation`

Required:

- **job_config_id** (String) ID of the scheduler job that will perform key rotation.
- **key_source** (String) Source of the key material. Options: dsm, ciphertrust.

Optional:

- **disable_encrypt** (Boolean) Disable encryption on the old key.
- **dsm_domain_id** (String) DSM domain ID, required if key_source is dsm.


<a id="nestedblock--import_key_material"></a>
### Nested Schema for `import_key_material`

Required:

- **source_key_name** (String) Name of the key created for key material.

Optional:

- **dsm_domain_id** (String) Domain for the DSM key. Required if source_key_tier is dsm.
- **key_expiration** (Boolean) Enable key material expiration.
- **source_key_tier** (String) Source of the key. Options: local and dsm. Default is local.
- **valid_to** (String) Date of key material expiry in UTC time in RFC3339 format. For example, 2022-07-03T14:24:00Z.


<a id="nestedblock--key_policy"></a>
### Nested Schema for `key_policy`

Optional:

- **external_accounts** (List of String) Other AWS accounts that can access to the key.
- **key_admins** (List of String) Key administrators.
- **key_users** (List of String) Key users.
- **policy** (String) AWS key policy json.
- **policy_template** (String) CipherTrust policy template ID


<a id="nestedblock--replicate_key"></a>
### Nested Schema for `replicate_key`

Required:

- **key_id** (String) CipherTrust key ID of they key to replicate.

Optional:

- **import_key_material** (Boolean) Import key material to a replicated external key.
- **key_expiration** (Boolean) Enable key expiration of the replicated key. Only applies to external keys.
- **make_primary** (Boolean) Update the primary key region to the replicated key's region following replication.
- **valid_to** (String) Date the key material of the replicated key expires. Only applies to external keys. Set as UTC time in RFC3339 format. For example, 2022-07-03T14:24:00Z.


<a id="nestedblock--upload_key"></a>
### Nested Schema for `upload_key`

Required:

- **source_key_identifier** (String) DSM or CipherTrust key ID to upload to AWS.

Optional:

- **key_expiration** (Boolean) Enable key expiration.
- **source_key_tier** (String) Source of the key. Options: local and dsm. Default is local.
- **valid_to** (String) Date of key expiry in UTC time in RFC3339 format. For example, 2022-07-03T14:24:00Z.


